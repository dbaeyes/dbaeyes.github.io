---
layout: post
title: oracle 的两个替换函数 REPLACE TRANSLATE
date: 2009-01-12 18:30:48.000000000 +10:30
type: post
published: true
status: publish
categories:
- Oracle
tags:
- oracle
- sql
meta:
  posturl_add_url: 'yes'
  _edit_last: '1'
  views: '936'
---
<p><span style="font-size: medium;">replace就是一般意义上的字符串替换，translate只是一个字符替换对应的一个字符，下面有手册说明，还有例子 O(∩_∩)O哈哈~</span></p>
<div>
<h1>REPLACE</h1>
<div><strong>Syntax</strong></div>
<p><img title="Description of replace.gif follows" src="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/img/replace.gif" alt="Description of replace.gif follows" width="527" height="46" /></p>
<div><strong>Purpose</strong></div>
<p>REPLACE returns char with every occurrence of search_string replaced with replacement_string. If replacement_string is omitted or null, then all occurrences of search_string are removed. If search_string is null, then char is returned.<br />
Both search_string and replacement_string, as well as char, can be any of the datatypes CHAR, VARCHAR2, NCHAR, NVARCHAR2, CLOB, or NCLOB. The string returned is in the same character set as char. The function returns VARCHAR2 if the first argument is not a LOB and returns CLOB if the first argument is a LOB.<br />
REPLACE provides functionality related to that provided by the TRANSLATE function. TRANSLATE provides single-character, one-to-one substitution. REPLACE lets you substitute one string for another as well as to remove character strings.</p>
<div></div>
<div><strong>Examples</strong></div>
<div>The following example replaces occurrences of <code><span style="font-family: 新宋体;">J</span></code> with <code><span style="font-family: 新宋体;">BL</span></code>:</div>
<pre>SELECT REPLACE('JACK and JUE','J','BL') "Changes"
     FROM DUAL;

Changes
--------------
BLACK and BLUE</pre>
<h1>TRANSLATE</h1>
<pre></pre>
<div><strong>Syntax</strong></div>
<p><img title="Description of translate.gif follows" src="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/img/translate.gif" alt="Description of translate.gif follows" width="430" height="27" /></p>
<pre>
<a name="sthref2396" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/img_text/translate.htm"></a></pre>
<div><strong>Purpose</strong></div>
<pre><code><span style="font-family: 新宋体;">TRANSLATE returns expr with all occurrences of each character in from_string replaced by its corresponding character in to_string. 
Characters in expr that are not in from_string are not replaced. If expr is a character string, then you must enclose it in single 
quotation marks. The argument from_string can contain more characters than to_string. In this case, the extra characters at the 
end of from_string have no corresponding characters in to_string. If these extra characters appear in char, then they are removed 
from the return value.
You cannot use an empty string for to_string to remove all characters in from_string from the return value. Oracle Database 
interprets the empty string as null, and if this function has a null argument, then it returns null.
TRANSLATE provides functionality related to that provided by the REPLACE function. REPLACE lets you substitute a single string for 
another single string, as well as remove character strings. TRANSLATE lets you make several single-character, one-to-one substitutions in one operation.
This function does not support CLOB data directly. However, CLOBs can be passed in as arguments through implicit data conversion.
See Also:
</span></code></pre>
<div><a href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/sql_elements002.htm#i55214"><span style="color: #0000ff;">"Datatype Comparison Rules"</span></a> for more information and <a href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/functions134.htm#i78608"><span style="color: #800080;">REPLACE</span></a></div>
<pre></pre>
<div><strong>Examples</strong></div>
<div>The following statement translates a book title into a string that could be used (for example) as a filename.<br />
The <code><span style="font-family: 新宋体;">from_string</span></code> contains four characters: a space, asterisk, slash, and apostrophe (with an extra apostrophe as the escape character).<br />
The <code><span style="font-family: 新宋体;">to_string</span></code> contains only three underscores. This leaves the fourth character in the <code><span style="font-family: 新宋体;">from_string</span></code> without a corresponding replacement,<br />
so apostrophes are dropped from the returned value.</div>
<pre>SELECT TRANSLATE('SQL*Plus User''s Guide', ' */''', '___') FROM DUAL;

TRANSLATE('SQL*PLUSU
--------------------
SQL_Plus_Users_Guide

看看例子更好明白：</pre>
<h1><span><span style="font-size: small;">TRANSLATE     ('abcd',     'ab',     '12')     ==&gt;     '12cd'<br />
TRANSLATE     ('12345',     '15',     'xx')     ==&gt;     'x234x'<br />
TRANSLATE     ('grumpy     old     possum',     'uot',     '%$*')     ==&gt;         'gr%mpy     $ld     p$ss%m'<br />
TRANSLATE     ('my     language     needs     the     letter     e',     'egms',     'X')<br />
==&gt;<br />
'y     lanuaX     nXXd     thX     lXttXr     X';<br />
TRANSLATE     ('please     go     away',     'a',     NULL)     ==&gt;     NULL</p>
<p>REPLACE     ('CAT     CALL',     'C')     ==&gt;     'AT     ALL'<br />
REPLACE     ('Zero     defects     in     period     99     reached     99%!',     '99',     '100')<br />
==&gt;<br />
'Zero     defects     in     period     100     reached     100%!'<br />
REPLACE     ('this     that     and     the     other',     'th',     'z')     ==&gt;     'zis     zat     and     ze     ozer'<br />
</span></span></h1>
<pre></pre>
</div>
