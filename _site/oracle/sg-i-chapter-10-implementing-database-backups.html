<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="在遙遠的地方 一切虔誠終必相遇">

    <title>SG I: Chapter 10 | Implementing Database Backups - Microdust</title>

    <link rel="canonical" href="http://dbaeyes.github.io/oracle/sg-i-chapter-10-implementing-database-backups.html">

    <!-- Icons -->
  <link rel="shortcut icon" href="img/favicon.ico">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>


<body ontouchstart="">

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Microdust</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Home</a>
                </li>
                
                <li>
                    <a href="/About.html">About</a>
                </li>
                
                <li>
                    <a href="/Lists.html">Reading</a>
                </li>
                
                <li>
                    <a href="/Tools.html">Tools</a>
                </li>
                
                <li>
                    <a href="/tags.html">Tags</a>
                </li>
                
                <li>
                    <a href="/photos/Instagram/">Photos: Instagram</a>
                </li>
                
                <li>
                    <a href="/photos/">Photos</a>
                </li>
                

            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<style type="text/css">
    header.intro-header{
        background-image: url('/img/fantasy.jpg')
    }
</style>
<header class="intro-header" >
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="Tags">
                        
                        <a class="tag" href="/Tags/#oracle" title="oracle">oracle</a>
                        
                        <a class="tag" href="/Tags/#study" title="study">study</a>
                        
                    </div>
                    <h1>SG I: Chapter 10 | Implementing Database Backups</h1>
                    
                    <span class="meta">Posted by {"login"=>"Toby", "email"=>"renwei.chu@gmail.com", "display_name"=>"David", "first_name"=>"", "last_name"=>""} on February 25, 2008</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 post-container">

                <p><strong><span style="color: #ff6600;">*Backup and Recovery Concepts</span></strong></p>
<div>
<p>·Describe the basics of database backup, restore and recovery.<br />
·Configure ARCHIVELOG mode.<br />
·Configure a database for recoverability.</p>
<p><strong><span style="color: #ff6600;">*Database Backups</span></strong><br />
·Create consistent database backups.<br />
·Back up your database without shutting it down.<br />
·Create incremental backups.<br />
·Automate database backups.<br />
·Monitor the flash recovery area.<br />
·Describe the difference between image copies and backup sets.<br />
·Describe the different types of database backups.<br />
·Back up a control file to trace.<br />
·Manage backups.</p>
<p><span style="color: #ff6600; font-size: medium;"><strong>Understanding and Configuring Recovery Components</strong></span></p>
<p><span style="color: #ff6600;"><strong>Control Files</strong></span><br />
The control file is one of the smallest, yet one of the most critical, files in your database.</p>
<p><span style="color: #ff6600;">Control File Architecture</span><br />
The control file is a relatively small (in the megabyte range) binary file that contains information about the structure of the database. It has the structure of the database—the datafiles and redo log files that constitute a database.<br />
When you start up the database, Oracle uses the control file to identify the datafiles and redo log files and opens them. Control files play a major role when recovering a database.</p>
<p>The contents of the control file include the following:<br />
·The database name to which the control file belongs. A control file can belong to only one database.<br />
·The database creation time stamp.<br />
·The name, location, and online/offline status information of the datafiles.<br />
·The name and location of the redo log files.<br />
·Redo log archive information.<br />
·Tablespace names.<br />
·The current log sequence number, which is a unique identifier that is incremented and recorded when anonline redo log file is switched.<br />
·The most recent checkpoint information.<br />
·The beginning and ending of undo segments.<br />
·Recovery Manager’s backup information. Recovery Manager (RMAN) is the Oracle utility you use to back up and recover databases</p>
<p><span style="color: #ff6600;">Multiplexing Control Files</span><br />
When multiplexing control files, Oracle updates all the control files at the same time, but uses only the first control file listed in the CONTROL_FILES parameter for reading.<br />
<span style="color: #ff6600;"><strong>Understanding Checkpoints</strong></span><br />
During a checkpoint, CKPT updates the control file and the header of the datafiles to reflect the last successful transaction by recording the last system change number (SCN).</p>
<p>The CKPT process updates the headers of datafiles and control files; the actual blocks are written to the file by the DBWn process.</p>
<p><span style="color: #ff6600;"><strong>Redo Log Files</strong></span><br />
A redo log file records all changes to the database, in most cases before the changes are written to the atafiles.</p>
<p><span style="color: #ff6600;">Redo Log File Architecture</span><br />
Online redo log files are filled with redo records. A redo record, also called a redo entry, is made up of a group of change vectors, each of which describes a change made to a single block in the database.</p>
<p>The LGWR process writes redo information from the redo log buffer to the online redo log files under a variety of circumstances:<br />
When a user commits a transaction, even if this is the only transaction in the log buffer.<br />
When the redo log buffer becomes one-third full.<br />
When the buffer contains approximately 1MB of changed records. This total does not include deleted or inserted records.</p>
<p>You can force a checkpoint if needed, as shown here:<br />
<span style="color: #3366ff;"><em>ALTER SYSTEM CHECKPOINT;</em></span><br />
Another way to force a checkpoint is by forcing a log file switch:<br />
<em><span style="color: #3366ff;">ALTER SYSTEM SWITCH LOGFILE;</span></em></p>
<p><span style="color: #ff6600;">Creating New Groups</span><br />
The following statement creates a new log file group with two members:<br />
<em><span style="color: #3366ff;">ALTER DATABASE ADD LOGFILE<br />
GROUP 3 (‘/ora02/oradata/MYDB01/redo0301.log’,<br />
‘/ora03/oradata/MYDB01/redo0302.log’) SIZE 10M;</span></em></p>
<p>If you omit the GROUP clause, Oracle assigns the next available number.</p>
<p>To create a new group <span style="color: #0000ff;">without multiplexing</span>, use the following statement:<br />
<span style="color: #3366ff;"><em>ALTER DATABASE ADD LOGFILE<br />
‘/ora02/oradata/MYDB01/redo0301.log’ REUSE;</em></span></p>
<p><span style="color: #ff6600;">Adding New Members</span><br />
<em><span style="color: #3366ff;">ALTER DATABASE ADD LOGFILE MEMBER<br />
‘/ora04/oradata/MYDB01/redo0203.log’ TO GROUP 2;</span></em></p>
<p><span style="color: #ff6600;">Renaming Log Members</span><br />
1. Shut down the database.<br />
2. Copy/rename the redo log file member to the new location by using an operating system command.<br />
3. Start up the instance and mount the database (STARTUP MOUNT).<br />
4. Rename the log file member in the control file. Use ALTER DATABASE RENAME FILE ‘old_redo_file_name’ TO ‘new_redo_file_name’;.<br />
5. Open the database (ALTER DATABASE OPEN).<br />
6. Back up the control file.</p>
<p>Another way to achieve the same result is to add a new member to the group and then drop the old member from the group<br />
<span style="color: #ff6600;">Dropping Redo Log Groups</span><br />
the group that is to be dropped should not be the active group or the current group—that is, you can drop only an <span style="color: #0000ff;">inactive</span> log file group.<br />
<em><span style="color: #3366ff;">ALTER DATABASE DROP LOGFILE GROUP 3;</span></em></p>
<p>When an online redo log group is dropped from the database, the operating system files are not deleted from disk.<br />
<span style="color: #ff6600;">Dropping Redo Log Members<br />
</span><em><span style="color: #3366ff;">ALTER DATABASE DROP LOGFILE MEMBER<br />
‘/ora04/oradata/MYDB01/redo0203.log’;</span></em></p>
<p>If a database is running in ARCHIVELOG mode, redo log members cannot be deleted unless the redo log group has been archived.<br />
<span style="color: #ff6600;">Clearing Online Redo Log Files</span><br />
<em><span style="color: #3366ff;">ALTER DATABASE CLEAR LOGFILE GROUP 3;</span></em></p>
<p>You can also clear a log group member even if it has not been archived by using the <span style="color: #0000ff;">UNARCHIVED</span> keyword. In this case, it is advisable to do a full database backup at the earliest convenience, because the unarchived redo log file is no longer usable for database recovery.<br />
<span style="color: #ff6600;"><strong>Archived Redo Log Files</strong></span></p>
<p>&nbsp;</p>
<p>An archived redo log file is a copy of a redo log file before it is overwritten by new redo information. When an online redo log file is full, and LGWR starts writing to the next redo log file, ARCn copies the completed redo log file to the archive destination.<br />
<span style="color: #ff6600;"><strong>Setting the Archive Destination<br />
</strong></span><span style="color: #ff6600;"><br />
</span><strong><span style="color: #0000ff;">LOG_ARCHIVE_DEST_n</span></strong></p>
<p>eg.<br />
<span style="color: #3366ff;"><em>LOG_ARCHIVE_DEST_1 = ((LOCATION=’/archive/MYDB01’) MANDATORY REOPEN = 60)<br />
specifies a location for the archive log files on the local machine at /archive/MYDB01. The MANDATORY clause</em></span></p>
<p>specifies that writing to this location must succeed. The REOPEN clause specifies when the next attempt to write to this location should be made, when the first attempt did not succeed. The default value is 300 seconds.</p>
<p>eg.<br />
<em><span style="color: #3366ff;">the archive logs to a standby database on a remotecomputer.<br />
LOG_ARCHIVE_DEST_2 = (SERVICE=STDBY01) OPTIONAL REOPEN;<br />
Here STDBY01 is the Oracle Net connect string used to connect to the remote database. Because writing is optional, the database activity continues even if ARCn could not write the archive log file. It tries the writing operation again because the REOPEN clause is specified.</span></em></p>
<p><span style="color: #0000ff;"><strong>LOG_ARCHIVE_MIN_SUCCEED_DEST</strong></span><br />
This parameter specifies the number of destinations that the ARCn process should successfully write at a minimum to proceed with overwriting the online redo log files. The default value of this parameter is 1.</p>
<p><strong><span style="color: #0000ff;">LOG_ARCHIVE_FORMAT</span></strong><br />
%s Log sequence number<br />
%t Thread number<br />
%r Resetlogs ID: ensures uniqueness even after using advanced recovery techniques that resets the log sequence numbers<br />
%d Database ID<br />
<span style="color: #3366ff;">eg. ARC%S_%R.%T</span></p>
<p><span style="color: #ff6600;"><strong>Setting ARCHIVELOG</strong></span><br />
To enable ARCHIVELOG mode, follow these steps:<br />
1. Shut down the database. Set up the appropriate initialization parameters.<br />
2. Start up and mount the database; ARCHIVELOG mode can be changed only when the database is in the <span style="color: #0000ff;">MOUNT</span> state.<br />
3. Enable ARCHIVELOG mode by using the command <span style="color: #0000ff;">ALTER DATABASE ARCHIVELOG.<br />
</span>4. Open the database by using <span style="color: #0000ff;">ALTER DATABASE OPEN.<br />
</span>Get the ARCHIVELOG mode from the dynamic performance vies <span style="color: #0000ff;">V$DATABASE</span><br />
<span style="color: #ff6600; font-size: medium;"><strong>The Flash Recovery Area</strong></span></p>
<p>Flash Recovery Area Occupants<br />
The Flash Recovery area can contain the following:<br />
<strong><span style="color: #0000ff;">Control files</span></strong> A copy of the control file is created in the Flash Recovery area when the database is created.<br />
<span style="color: #0000ff;"><strong>Archived log files</strong></span> When the Flash Recovery area is configured, the initialization parameter LOG_ARCHIVE_DEST_10 is automatically set to the Flash Recovery area location.<br />
<span style="color: #0000ff;"><strong>Flashback logs</strong></span> If flashback database is enabled, its flashback logs are stored in the Flash Recovery area.<br />
<strong><span style="color: #0000ff;">Control file and SPFILE autobackups</span></strong> The Flash Recovery area holds control file and SPFILE autobackups generated by RMAN if RMAN is configured for control file autobackup.<br />
<strong><span style="color: #0000ff;">Datafile</span></strong> copies For RMAN BACKUP AS COPY image files, the default destination for the datafile copies is the Flash Recovery area.<br />
<span style="color: #ff6600;">RMAN backup</span> sets By default, RMAN uses the Flash Recovery area for both backup sets and image copies.<br />
<strong><span style="color: #ff6600;">The Flash Recovery Area and SQL Commands</span></strong></p>
<p><span style="color: #0000ff;">DB_RECOVERY_FILE_DEST_SIZE</span>, which must be defined before <span style="color: #0000ff;">DB_RECOVERY_FILE_DEST</span>, defines the size of the Flash Recovery area.<br />
<em><span style="color: #3366ff;">SQL&gt; alter system<br />
2 set db_recovery_file_dest_size = 8g scope=both;</span></em></p>
<p>The parameter DB_RECOVERY_FILE_DEST specifies the physical location where all Flash Recovery files are stored.<br />
<em><span style="color: #3366ff;">SQL&gt; alter system<br />
2 set db_recovery_file_dest = ‘/OraFlash’ scope=both;</span></em><br />
<strong><span style="color: #ff6600;">Performing Backups</span></strong></p>
<p><span style="color: #ff6600;">Understanding Backup Terminology</span><br />
The backup type can be divided into two general categories: full backups and incremental backups.<br />
When the database is open or closed, categorized into: consistent and inconsistent backups.</p>
<p><span style="color: #0000ff;">Whole database</span> A whole database backup includes all datafiles and at least one control file.<br />
<span style="color: #0000ff;">Partial database</span> A partial database backup includes zero or more tablespaces, which in turn includes zero or more datafiles; a control file is optional in a partial database backup.</p>
<p><span style="color: #0000ff;">Full</span> A full backup includes all blocks of every datafile backed up in a whole or partial database backup.<br />
<span style="color: #0000ff;">Incremental</span> An incremental backup makes a copy of all data blocks that have changed since a previous backup.Oracle 10g supports five levels of incremental backups, from 0 to 4. An incremental backup at level 0 is considered a baseline backup; it is the equivalent of a full backup and contains all data blocks in the datafile(s) that are backed up.</p>
<p><span style="color: #0000ff;">Consistent</span> A consistent backup, also known as an offline backup, is performed while the database is not open. These backups are consistent because the SCN in the control file matches the SCN in every datafile’s header.<br />
<span style="color: #0000ff;">Inconsistent</span> It is a way to maintain availability of the database while performing backups. Inconsistent backups require recovery when they are used for recovering from a media failure, but keep availability high because the database is open while the backup is performed.</p>
<p><span style="color: #ff6600;">Backing Up the Control File</span><br />
It is rather a proactive rather than reactive report of the contents of the control file, and the report happens to end up in a directory with other trace files.</p>
<p><span style="color: #3366ff;"><em>SQL&gt; alter database backup controlfile to trace;<br />
Database altered.</em></span></p>
<p>Make a binary copy<br />
<em><span style="color: #3366ff;">SQL&gt; alter database backup controlfile to<br />
'/u03/oradata/ctlfile20040911.bkp';<br />
Database altered.</span></em><br />
<span style="color: #ff6600; font-size: medium;"><strong>Using RMAN to Create Backups</strong></span><br />
RMAN is a “one-stop shopping” solution for your entire backup and recovery needs.</p>
<p><span style="color: #ff6600;"><strong>Configuring RMAN Backup Settings</strong></span></p>
<p><span style="color: #0000ff;">Parallelism</span> To take advantage of multiple CPUs or disk controllers,<br />
<span style="color: #0000ff;">Disk Backup Location</span> If not the Flash Recover area<br />
<span style="color: #0000ff;">Disk Backup Type</span> You can choose image copy, backup set, or compressed backup set.</p>
<p><span style="color: #3366ff;"><em><strong>[oracle@oltp oracle]$ rman target /</strong></em></span></p>
<p><span style="color: #ff6600;">Creating Full and Incremental Backups</span><br />
The Oracle recommended backup strategy uses RMAN to make a one-time whole-database, baseline incremental level 0 online backup weekly, and then a level 1 incremental backup for the other days of the week. You can easily fine-tune this strategy for your own needs by making, for example, a level 2 incremental backup at noon during the weekdays if heavy DML (Data Manipulation Language) is occurring in the database.</p>
<p><em><span style="color: #3366ff;">RMAN&gt; backup incremental level 0<br />
2&gt; as compressed backupset database;</span></em></p>
<p><span>启动 backup 于 28-2月 -08<br />
分配的通道: ORA_DISK_1<br />
通道 ORA_DISK_1: sid=131 devtype=DISK<br />
通道 ORA_DISK_1: 启动压缩的增量级别 0 数据文件备份集<br />
通道 ORA_DISK_1: 正在指定备份集中的数据文件<br />
输入数据文件 fno=00001 name=G:\ORACLE\PRODUCT\10.2.0\ORADATA\ORCL\DATAFILE\O1_MF<br />
_SYSTEM_3SCY2ZVT_.DBF<br />
输入数据文件 fno=00003 name=G:\ORACLE\PRODUCT\10.2.0\ORADATA\ORCL\DATAFILE\O1_MF<br />
_SYSAUX_3SCY2ZY8_.DBF<br />
输入数据文件 fno=00002 name=G:\ORACLE\PRODUCT\10.2.0\ORADATA\ORCL\DATAFILE\O1_MF<br />
_UNDOTBS1_3SCY305V_.DBF<br />
输入数据文件 fno=00004 name=G:\ORACLE\PRODUCT\10.2.0\ORADATA\ORCL\DATAFILE\O1_MF<br />
_USERS_3SCY306T_.DBF<br />
通道 ORA_DISK_1: 正在启动段 1 于 28-2月 -08<br />
通道 ORA_DISK_1: 已完成段 1 于 28-2月 -08<br />
段句柄=G:\ORACLE\PRODUCT\10.2.0\FLASH_RECOVERY_AREA\ORCL\BACKUPSET\2008_02_28\O1<br />
_MF_NNND0_TAG20080228T215433_3WFH8TNZ_.BKP 标记=TAG20080228T215433 注释=NONE<br />
通道 ORA_DISK_1: 备份集已完成, 经过时间:00:01:06<br />
通道 ORA_DISK_1: 启动压缩的增量级别 0 数据文件备份集<br />
通道 ORA_DISK_1: 正在指定备份集中的数据文件<br />
备份集中包括当前控制文件<br />
在备份集中包含当前的 SPFILE<br />
通道 ORA_DISK_1: 正在启动段 1 于 28-2月 -08<br />
通道 ORA_DISK_1: 已完成段 1 于 28-2月 -08<br />
段句柄=G:\ORACLE\PRODUCT\10.2.0\FLASH_RECOVERY_AREA\ORCL\BACKUPSET\2008_02_28\O1<br />
_MF_NCSN0_TAG20080228T215433_3WFHBXX9_.BKP 标记=TAG20080228T215433 注释=NONE<br />
通道 ORA_DISK_1: 备份集已完成, 经过时间:00:00:05<br />
完成 backup 于 28-2月 -08</span></p>
<p>---------------------------------------------------<br />
Starting with a baseline level 0 incremental backup, you can make level 1 incremental backups during the rest of the week, as in the following example:</p>
<p><em><span style="color: #3366ff;">RMAN&gt; backup incremental level 1<br />
2&gt; as compressed backupset database;</span></em></p>
<p><span>启动 backup 于 28-2月 -08<br />
使用通道 ORA_DISK_1<br />
通道 ORA_DISK_1: 启动压缩的增量级别 1 数据文件备份集<br />
通道 ORA_DISK_1: 正在指定备份集中的数据文件<br />
输入数据文件 fno=00001 name=G:\ORACLE\PRODUCT\10.2.0\ORADATA\ORCL\DATAFILE\O1_MF<br />
_SYSTEM_3SCY2ZVT_.DBF<br />
输入数据文件 fno=00003 name=G:\ORACLE\PRODUCT\10.2.0\ORADATA\ORCL\DATAFILE\O1_MF<br />
_SYSAUX_3SCY2ZY8_.DBF<br />
输入数据文件 fno=00002 name=G:\ORACLE\PRODUCT\10.2.0\ORADATA\ORCL\DATAFILE\O1_MF<br />
_UNDOTBS1_3SCY305V_.DBF<br />
输入数据文件 fno=00004 name=G:\ORACLE\PRODUCT\10.2.0\ORADATA\ORCL\DATAFILE\O1_MF<br />
_USERS_3SCY306T_.DBF<br />
通道 ORA_DISK_1: 正在启动段 1 于 28-2月 -08<br />
通道 ORA_DISK_1: 已完成段 1 于 28-2月 -08<br />
段句柄=G:\ORACLE\PRODUCT\10.2.0\FLASH_RECOVERY_AREA\ORCL\BACKUPSET\2008_02_28\O1<br />
_MF_NNND1_TAG20080228T215906_3WFHKCH4_.BKP 标记=TAG20080228T215906 注释=NONE<br />
通道 ORA_DISK_1: 备份集已完成, 经过时间:00:00:36<br />
通道 ORA_DISK_1: 启动压缩的增量级别 1 数据文件备份集<br />
通道 ORA_DISK_1: 正在指定备份集中的数据文件<br />
备份集中包括当前控制文件<br />
在备份集中包含当前的 SPFILE<br />
通道 ORA_DISK_1: 正在启动段 1 于 28-2月 -08<br />
通道 ORA_DISK_1: 已完成段 1 于 28-2月 -08<br />
段句柄=G:\ORACLE\PRODUCT\10.2.0\FLASH_RECOVERY_AREA\ORCL\BACKUPSET\2008_02_28\O1<br />
_MF_NCSN1_TAG20080228T215906_3WFHLKOZ_.BKP 标记=TAG20080228T215906 注释=NONE<br />
通道 ORA_DISK_1: 备份集已完成, 经过时间:00:00:04<br />
完成 backup 于 28-2月 -08</span><br />
<strong><span style="color: #ff6600; font-size: medium;">Managing Backups</span></strong></p>
<p><span style="color: #ff6600;">Catalog Maintenance</span></p>
<p><span style="color: #ff6600;"><strong>Monitoring the Flash Recovery Area</strong></span><br />
you are using the Flash Recovery area for all your backups, you want to make sure that you don’t run out of space on the disk used for the Flash Recovery area.</p>
<p><em><strong><span style="color: #33cccc;">ALTER SYSTEM SET db_recovery_file_dest_size=3g</span></strong></em></p>
<p>Delete All Obsolete to free up space:<br />
<em><span style="color: #3366ff;"><strong>RMAN&gt; delete noprompt obsolete;</strong></span></em></p>
<p>Delete All EXPIRED :<br />
<em><span style="color: #3366ff;"><strong>RMAN&gt; DELETE NOPROMPT EXPIRED BACKUP;<br />
RMAN&gt; DELETE NOPROMPT EXPIRED COPY;</strong></span></em></p>
<p>For all the details concerning the Flash Recovery area, you can use the dynamic performance view <strong><span style="color: #0000ff;">V$RECOVERY_FILE_DEST.</span></strong></p>
<p><em><span style="color: #ff6600;">Scripts from EM</span><br />
<span style="color: #3366ff;">BACKUP_ORCL_000082<br />
backup incremental level 0 as compressed cumulative device type disk tag '%TAG' database include current controlfile;</p>
<p>BACKUP_ORCL_000085<br />
run {<br />
allocate channel oem_backup_disk1 type disk maxpiecesize 1 G;<br />
backup incremental level 1 cumulative as COMPRESSED BACKUPSET tag '%TAG' database include current controlfile;<br />
release channel oem_backup_disk1;<br />
}</span></em></p>
<p>--EOF</p>
</div>


                <hr>


                <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">CC A-S 4.0 International License</a>.

                <hr>

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/my%20life/climb-the-hill-and-super-lie-in.html" data-toggle="tooltip" data-placement="top" title="爬山and超级懒觉">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/oracle/oracle-sql-tuning-hint-statement-zt.html" data-toggle="tooltip" data-placement="top" title="ORACLE常用SQL优化hint语句 (zt)">Next Post &rarr;</a>
                    </li>
                    
                </ul>

                <!-- Duoshuo Share start -->
                <style>
                    .ds-share{
                        text-align: right;
                    }
                    
                    @media only screen and (max-width: 700px) {
                        .ds-share {

                        }
                    }
                </style>

                <div class="ds-share"
                    data-thread-key="/oracle/sg-i-chapter-10-implementing-database-backups" data-title="SG I: Chapter 10 | Implementing Database Backups"
                    data-images="http://dbaeyes.github.io/img/fantasy.jpg"
                    data-content="*Backup and Recovery Concepts

·Describe the basics of database backup, resto... | Microdust:Azeril's blog"
                    data-url="http://dbaeyes.github.io/oracle/sg-i-chapter-10-implementing-database-backups.html">
                    <div class="ds-share-inline">
                      <ul  class="ds-share-icons-16">

                        <li data-toggle="ds-share-icons-more"><a class="ds-more" href="#">分享到：</a></li>
                        <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">微信</a></li>
                        <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">微博</a></li>
                        <li><a class="ds-douban" href="javascript:void(0);" data-service="douban">豆瓣</a></li>
                      </ul>
                      <div class="ds-share-icons-more">
                      </div>
                    </div>
                <hr>
                </div>
                <!-- Duoshuo Share end-->




                <!-- 多说评论框 start -->
                <div class="comment">
                    <div class="ds-thread" data-thread-key="/oracle/sg-i-chapter-10-implementing-database-backups" data-title="SG I: Chapter 10 | Implementing Database Backups" data-url="http://dbaeyes.github.io/oracle/sg-i-chapter-10-implementing-database-backups.html"></div>
                </div>
                <!-- 多说评论框 end -->
            </div>
        </div>
    </div>
</article>



<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"azeril"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0]
         || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
</script>
<!-- 多说公共JS代码 end -->



</script>

<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("http://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'always',
          placement: 'right',
          icon: '#'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>

  
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <!-- kill the Facebook and Weibo -->
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    

                    
                    <li>
                        <a href="https://twitter.com/Azeril_Lapland">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    

                    
                    <li>
                        <a href="https://github.com/Azeril">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <!--
                    
                    <li>
                        <a href="http://www.douban.com/people/Azeril">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-douban fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    -->

                    <!--
                    
                    <li>
                        <a href="https://www.facebook.com/Azeril_Lapland">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    -->

                    
                    <li>
                        <a target="_blank" href="https://www.zhihu.com/people/Azeril">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa  fa-stack-1x fa-inverse">知</i>
                            </span>
                        </a>
                    </li>
                    

                    <!--
                    
                    <li>
                        <a target="_blank" href="http://weibo.com/Azeril">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    -->

                </ul>
                <p class="copyright text-muted">
                &copy; 2011~2016 David ♪ Powered by Jekyll.
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>




<!-- Highlight.js -->
<script>
    async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js",function(){
        hljs.initHighlightingOnLoad();
    })
</script>
<link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">


</body>

</html>